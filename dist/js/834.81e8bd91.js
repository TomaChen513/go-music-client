"use strict";(self["webpackChunkmusic_client"]=self["webpackChunkmusic_client"]||[]).push([[834],{8045:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(3396),o=r(9749),a=r(3658),s=r(2167);function i(){const{proxy:e}=(0,t.FN)(),n=(0,o.oR)(),r=(0,t.Fl)((()=>n.getters.token));function i(e){return 0===e?"女":1===e?"男":void 0}function c(e){return e.split("-")[1]}function u(e){return e.split("-")[0]}function l(n){return!!r.value||(!1!==n&&e.$message({message:"请先登录",type:"warning"}),!1)}function d({id:n,url:r,pic:t,index:o,name:a,lyric:s,currentSongList:i}){const l=c(a),d=u(a);e.$store.dispatch("playMusic",{id:n,url:r,pic:t,index:o,songTitle:l,singerName:d,lyric:s,currentSongList:i})}async function m({songUrl:n,songName:r}){if(!n)return e.$message({message:"下载链接为空！",type:"error"}),void console.error("下载链接为空！");const t=await s.x.downloadMusic(n),o=document.createElement("a");o.download=`${r}.mp3`,o.style.display="none";const a=new Blob([t.data]);o.href=URL.createObjectURL(a),document.body.appendChild(o),o.click(),document.body.removeChild(o)}function p(n){e.$store.commit("setActiveNavName",n)}function g(n,r){switch(n){case a.wC.Search:e.$router.push({path:r.path,query:r.query});break;case a.wC.Home:case a.wC.SongSheet:case a.wC.SongSheetDetail:case a.wC.Singer:case a.wC.SingerDetail:case a.wC.Personal:case a.wC.PersonalData:case a.wC.Setting:case a.wC.SignIn:case a.wC.SignUp:case a.wC.SignOut:case a.wC.Lyric:case a.wC.Error:default:e.$router.push({path:r.path});break}}function w(n=-1){e.$router.go(n)}return{getUserSex:i,getSongTitle:c,getSingerName:u,changeIndex:p,checkStatus:l,playMusic:d,routerManager:g,goBack:w,downloadMusic:m}}},3089:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(3396);const o={class:"icon","aria-hidden":"true"},a=["xlink:href"];function s(e,n,r,s,i,c){return(0,t.wg)(),(0,t.iD)("svg",o,[(0,t._)("use",{"xlink:href":e.icon},null,8,a)])}var i=(0,t.aZ)({props:{icon:String}}),c=r(89);const u=(0,c.Z)(i,[["render",s]]);var l=u},6721:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(3396);const o={class:"login-logo"};function a(e,n,r,a,s,i){const c=(0,t.up)("yin-icon");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t.Wm)(c,{icon:e.icon},null,8,["icon"])])}var s=r(3089),i=r(3658),c=(0,t.aZ)({components:{YinIcon:s.Z},data(){return{icon:i.JO.ERJI}}}),u=r(89);const l=(0,u.Z)(c,[["render",a],["__scopeId","data-v-4521b52c"]]);var d=l},4834:function(e,n,r){r.r(n),r.d(n,{default:function(){return C}});var t=r(3396),o=r(9242);const a=e=>((0,t.dD)("data-v-2b79db2a"),e=e(),(0,t.Cn)(),e),s={class:"sign"},i=a((()=>(0,t._)("div",{class:"sign-head"},[(0,t._)("span",null,"帐号登录")],-1))),c=(0,t.Uk)("注册"),u=(0,t.Uk)("登录");function l(e,n,r,a,l,d){const m=(0,t.up)("yin-login-logo"),p=(0,t.up)("el-input"),g=(0,t.up)("el-form-item"),w=(0,t.up)("el-button"),f=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(m),(0,t._)("div",s,[i,(0,t.Wm)(f,{ref:"signInForm","status-icon":"",model:e.registerForm,rules:e.SignInRules},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{prop:"username"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{placeholder:"用户名",modelValue:e.registerForm.username,"onUpdate:modelValue":n[0]||(n[0]=n=>e.registerForm.username=n)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(g,{prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{type:"password",placeholder:"密码",modelValue:e.registerForm.password,"onUpdate:modelValue":n[1]||(n[1]=n=>e.registerForm.password=n),onKeyup:(0,o.D2)(e.handleLoginIn,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,t.Wm)(g,{class:"sign-btn"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{onClick:e.handleSignUp},{default:(0,t.w5)((()=>[c])),_:1},8,["onClick"]),(0,t.Wm)(w,{type:"primary",onClick:e.handleLoginIn},{default:(0,t.w5)((()=>[u])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])],64)}var d=r(4870),m=r(8045),p=r(6721),g=r(2167),w=r(3658),f=(0,t.aZ)({components:{YinLoginLogo:p.Z},setup(){const{proxy:e}=(0,t.FN)(),{routerManager:n,changeIndex:r}=(0,m.Z)(),o=(0,d.qj)({username:"",password:""});async function a(){let t=!0;if(e.$refs["signInForm"].validate((e=>{if(!e)return t=!1})),!t)return;const a=new URLSearchParams;a.append("username",o.username),a.append("password",o.password);try{const t=await g.x.signIn(a);e.$message({message:t.message,type:t.type}),t.success&&(e.$store.commit("setUserId",t.data[0].id),e.$store.commit("setUsername",t.data[0].username),e.$store.commit("setUserPic",t.data[0].avator),e.$store.commit("setToken",!0),r(w.ZF.Home),n(w.wC.Home,{path:w.wC.Home}))}catch(s){console.error(s)}}function s(){n(w.wC.SignUp,{path:w.wC.SignUp})}return{registerForm:o,SignInRules:w.Jj,handleLoginIn:a,handleSignUp:s}}}),h=r(89);const y=(0,h.Z)(f,[["render",l],["__scopeId","data-v-2b79db2a"]]);var C=y}}]);
//# sourceMappingURL=834.81e8bd91.js.map