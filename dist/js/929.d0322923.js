"use strict";(self["webpackChunkmusic_client"]=self["webpackChunkmusic_client"]||[]).push([[929],{8045:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(3396),r=n(9749),a=n(3658),i=n(2167);function s(){const{proxy:e}=(0,o.FN)(),t=(0,r.oR)(),n=(0,o.Fl)((()=>t.getters.token));function s(e){return 0===e?"女":1===e?"男":void 0}function l(e){return e.split("-")[1]}function c(e){return e.split("-")[0]}function u(t){return!!n.value||(!1!==t&&e.$message({message:"请先登录",type:"warning"}),!1)}function g({id:t,url:n,pic:o,index:r,name:a,lyric:i,currentSongList:s}){const u=l(a),g=c(a);e.$store.dispatch("playMusic",{id:t,url:n,pic:o,index:r,songTitle:u,singerName:g,lyric:i,currentSongList:s})}async function d({songUrl:t,songName:n}){if(!t)return e.$message({message:"下载链接为空！",type:"error"}),void console.error("下载链接为空！");const o=await i.x.downloadMusic(t),r=document.createElement("a");r.download=`${n}.mp3`,r.style.display="none";const a=new Blob([o.data]);r.href=URL.createObjectURL(a),document.body.appendChild(r),r.click(),document.body.removeChild(r)}function p(t){e.$store.commit("setActiveNavName",t)}function w(t,n){switch(t){case a.wC.Search:e.$router.push({path:n.path,query:n.query});break;case a.wC.Home:case a.wC.SongSheet:case a.wC.SongSheetDetail:case a.wC.Singer:case a.wC.SingerDetail:case a.wC.Personal:case a.wC.PersonalData:case a.wC.Setting:case a.wC.SignIn:case a.wC.SignUp:case a.wC.SignOut:case a.wC.Lyric:case a.wC.Error:default:e.$router.push({path:n.path});break}}function m(t=-1){e.$router.go(t)}return{getUserSex:s,getSongTitle:l,getSingerName:c,changeIndex:p,checkStatus:u,playMusic:g,routerManager:w,goBack:m,downloadMusic:d}}},2024:function(e,t,n){function o(e){if(null==e||""==e)return"";const t=new Date(e),n=t.getFullYear(),o=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,r=t.getDate()<10?"0"+t.getDate():t.getDate();return n+"-"+o+"-"+r}function r(e){if(null==e||""==e)return"";const t=new Date(e),n=t.getFullYear(),o=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,r=t.getDate()<10?"0"+t.getDate():t.getDate(),a=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return n+"-"+o+"-"+r+" "+a+":"+i+":"+s}function a(e){let t=e.split("\n");const n=/\[\d{2}:\d{2}.(\d{3}|\d{2})\]/g,o=[];if(!/\[.+\]/.test(e))return[[0,e]];while(!n.test(t[0]))t=t.slice(1);0===t[t.length-1].length&&t.pop();for(const r of t){const e=r.match(n),t=r.replace(n,"");for(const n of e){const e=n.slice(1,-1).split(":");""!==t&&o.push([60*parseInt(e[0],10)+parseFloat(e[1]),t])}}return o.sort(((e,t)=>e[0]-t[0])),o}function i(e){let t=parseInt(e),n=0,o=0;t>60&&(n=parseInt((t/60).toString()),t=parseInt((t%60).toString()),n>60&&(o=parseInt((n/60).toString()),n=60));let r="";return r=parseInt(t.toString())<10?"0:0"+parseInt(t.toString()):"0:"+parseInt(t.toString()),n>0&&(r=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),r=parseInt(n.toString())+":"+r),o>0&&(r=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),r=parseInt(o.toString())+":"+parseInt(n.toString())+":"+r),r}n.d(t,{oy:function(){return o},p6:function(){return r},zu:function(){return a},ZC:function(){return i}})},373:function(e,t,n){n.d(t,{Z:function(){return _}});var o=n(3396);const r={class:"content"},a=(0,o.Uk)("下载"),i=(0,o.Uk)("删除");function s(e,t,n,s,l,c){const u=(0,o.up)("el-table-column"),g=(0,o.up)("MoreFilled"),d=(0,o.up)("el-icon"),p=(0,o.up)("el-dropdown-item"),w=(0,o.up)("el-dropdown-menu"),m=(0,o.up)("el-dropdown"),h=(0,o.up)("el-table");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(h,{"highlight-current-row":"",data:e.dataList,onRowClick:e.handleClick},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{prop:"songName",label:"歌曲"}),(0,o.Wm)(u,{prop:"singerName",label:"歌手"}),(0,o.Wm)(u,{prop:"introduction",label:"专辑"}),(0,o.Wm)(u,{label:"编辑",width:"80",align:"center"},{default:(0,o.w5)((t=>[(0,o.Wm)(m,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{icon:e.Download,onClick:n=>e.downloadMusic({songUrl:t.row.url,songName:t.row.name})},{default:(0,o.w5)((()=>[a])),_:2},1032,["icon","onClick"]),e.show?((0,o.wg)(),(0,o.j4)(p,{key:0,icon:e.Delete,onClick:n=>e.deleteCollection({id:t.row.id})},{default:(0,o.w5)((()=>[i])),_:2},1032,["icon","onClick"])):(0,o.kq)("",!0)])),_:2},1024)])),default:(0,o.w5)((()=>[(0,o.Wm)(d,{onClick:n=>e.handleEdit(t.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(g)])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data","onRowClick"])])}var l=n(4870),c=n(9749),u=n(8045),g=n(9092),d=n(547),p=n(6854);const w=(0,o.aZ)({name:"Download"}),m={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},h=(0,o._)("path",{fill:"currentColor",d:"M160 832h704a32 32 0 110 64H160a32 32 0 110-64zm384-253.696l236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),f=[h];function S(e,t,n,r,a,i){return(0,o.wg)(),(0,o.iD)("svg",m,f)}var C=(0,p.Z)(w,[["render",S]]),D=n(2167),k=n(3658),y=(0,o.aZ)({components:{MoreFilled:g.Z},props:{songList:Array,show:{default:!1}},emits:["changeData"],setup(e){const{getSongTitle:t,getSingerName:n,playMusic:r,checkStatus:a,downloadMusic:i}=(0,u.Z)(),{proxy:s}=(0,o.FN)(),g=(0,c.oR)(),{songList:p}=(0,l.BK)(e),w=(0,l.qj)({dislike:k.JO.Dislike,like:k.JO.Like}),m=(0,o.Fl)((()=>g.getters.songUrl)),h=(0,o.Fl)((()=>g.getters.singerName)),f=(0,o.Fl)((()=>g.getters.songTitle)),S=(0,o.Fl)((()=>{const e=[];return p.value.forEach(((o,r)=>{o["songName"]=t(o.name),o["singerName"]=n(o.name),o["index"]=r,e.push(o)})),e}));function y(e){r({id:e.id,url:e.url,pic:e.pic,index:e.index,name:e.name,lyric:e.lyric,currentSongList:p.value})}function v(e){console.log("row",e)}const I=(0,o.Fl)((()=>g.getters.userId));async function _({id:e}){if(!a())return;const t=new URLSearchParams;t.append("userId",I.value),t.append("type","0"),t.append("songId",e);const n=await D.x.deleteCollection(t);s.$message({message:n.message,type:n.type}),!1===n.data&&s.$emit("changeData",n.data)}return{dataList:S,iconList:w,Delete:d.Z,Download:C,songUrl:m,singerName:h,songTitle:f,handleClick:y,handleEdit:v,downloadMusic:i,deleteCollection:_}}}),v=n(89);const I=(0,v.Z)(y,[["render",s],["__scopeId","data-v-45d5c4cc"]]);var _=I},3929:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var o=n(3396),r=n(7139);const a=e=>((0,o.dD)("data-v-038d5159"),e=e(),(0,o.Cn)(),e),i={class:"album-info"},s=a((()=>(0,o._)("h2",null,"基本资料",-1))),l={key:0};function c(e,t,n,a,c,u){const g=(0,o.up)("el-image"),d=(0,o.up)("el-aside"),p=(0,o.up)("song-list"),w=(0,o.up)("el-main"),m=(0,o.up)("el-container");return(0,o.wg)(),(0,o.j4)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"album-slide"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"singer-img",fit:"contain",src:e.attachImageUrl(e.songDetails.pic)},null,8,["src"]),(0,o._)("div",i,[s,(0,o._)("ul",null,[2!==e.songDetails.sex?((0,o.wg)(),(0,o.iD)("li",l,"性别："+(0,r.zw)(e.getUserSex(e.songDetails.sex)),1)):(0,o.kq)("",!0),(0,o._)("li",null,"生日："+(0,r.zw)(e.getBirth(e.songDetails.birth)),1),(0,o._)("li",null,"故乡："+(0,r.zw)(e.songDetails.location),1)])])])),_:1}),(0,o.Wm)(w,{class:"album-main"},{default:(0,o.w5)((()=>[(0,o._)("h1",null,(0,r.zw)(e.songDetails.name),1),(0,o._)("p",null,(0,r.zw)(e.songDetails.introduction),1),(0,o.Wm)(p,{songList:e.currentSongList},null,8,["songList"])])),_:1})])),_:1})}var u=n(4870),g=n(9749),d=n(8045),p=n(373),w=n(2167),m=n(2024),h=(0,o.aZ)({components:{SongList:p.Z},setup(){const e=(0,g.oR)(),{getUserSex:t}=(0,d.Z)(),n=(0,u.iH)([]),r=(0,o.Fl)((()=>e.getters.songDetails));return(0,o.bv)((async()=>{try{const e=await w.x.getSongOfSingerId(r.value.id);n.value=e.data}catch(e){console.error(e)}})),{songDetails:r,currentSongList:n,attachImageUrl:w.x.attachImageUrl,getBirth:m.oy,getUserSex:t}}}),f=n(89);const S=(0,f.Z)(h,[["render",c],["__scopeId","data-v-038d5159"]]);var C=S}}]);
//# sourceMappingURL=929.d0322923.js.map