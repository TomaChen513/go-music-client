"use strict";(self["webpackChunkmusic_client"]=self["webpackChunkmusic_client"]||[]).push([[184],{8045:function(e,n,t){t.d(n,{Z:function(){return s}});var a=t(3396),i=t(9749),o=t(3658),r=t(2167);function s(){const{proxy:e}=(0,a.FN)(),n=(0,i.oR)(),t=(0,a.Fl)((()=>n.getters.token));function s(e){return 0===e?"女":1===e?"男":void 0}function c(e){return e.split("-")[1]}function l(e){return e.split("-")[0]}function u(n){return!!t.value||(!1!==n&&e.$message({message:"请先登录",type:"warning"}),!1)}function d({id:n,url:t,pic:a,index:i,name:o,lyric:r,currentSongList:s}){const u=c(o),d=l(o);e.$store.dispatch("playMusic",{id:n,url:t,pic:a,index:i,songTitle:u,singerName:d,lyric:r,currentSongList:s})}async function g({songUrl:n,songName:t}){if(!n)return e.$message({message:"下载链接为空！",type:"error"}),void console.error("下载链接为空！");const a=await r.x.downloadMusic(n),i=document.createElement("a");i.download=`${t}.mp3`,i.style.display="none";const o=new Blob([a.data]);i.href=URL.createObjectURL(o),document.body.appendChild(i),i.click(),document.body.removeChild(i)}function p(n){e.$store.commit("setActiveNavName",n)}function m(n,t){switch(n){case o.wC.Search:e.$router.push({path:t.path,query:t.query});break;case o.wC.Home:case o.wC.SongSheet:case o.wC.SongSheetDetail:case o.wC.Singer:case o.wC.SingerDetail:case o.wC.Personal:case o.wC.PersonalData:case o.wC.Setting:case o.wC.SignIn:case o.wC.SignUp:case o.wC.SignOut:case o.wC.Lyric:case o.wC.Error:default:e.$router.push({path:t.path});break}}function w(n=-1){e.$router.go(n)}return{getUserSex:s,getSongTitle:c,getSingerName:l,changeIndex:p,checkStatus:u,playMusic:d,routerManager:m,goBack:w,downloadMusic:g}}},2476:function(e,n,t){t.d(n,{Z:function(){return k}});var a=t(3396),i=t(7139);const o={class:"play-list"},r={key:0,class:"play-title"},s={class:"play-body"},c=["onClick"],l=["onClick"],u={class:"card-name"};function d(e,n,t,d,g,p){const m=(0,a.up)("el-image"),w=(0,a.up)("yin-icon");return(0,a.wg)(),(0,a.iD)("div",o,[e.title?((0,a.wg)(),(0,a.iD)("div",r,(0,i.zw)(e.title),1)):(0,a.kq)("",!0),(0,a._)("ul",s,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.playList,((n,t)=>((0,a.wg)(),(0,a.iD)("li",{class:"card-frame",key:t},[(0,a._)("div",{class:"card",onClick:t=>e.goAblum(n)},[(0,a.Wm)(m,{class:"card-img",fit:"contain",src:e.attachImageUrl(n.pic)},null,8,["src"]),(0,a._)("div",{class:"mask",onClick:t=>e.goAblum(n)},[(0,a.Wm)(w,{class:"mask-icon",icon:e.BOFANG},null,8,["icon"])],8,l)],8,c),(0,a._)("p",u,(0,i.zw)(n.name||n.title),1)])))),128))])])}var g=t(4870),p=t(3089),m=t(8045),w=t(3658),h=t(2167),v=(0,a.aZ)({components:{YinIcon:p.Z},props:{title:String,playList:Array,path:String},setup(e){const{proxy:n}=(0,a.FN)(),{routerManager:t}=(0,m.Z)(),{path:i}=(0,g.BK)(e);function o(e){n.$store.commit("setSongDetails",e),t(i.value,{path:`/${i.value}/${e.id}`})}return{BOFANG:w.JO.BOFANG,goAblum:o,attachImageUrl:h.x.attachImageUrl}}}),f=t(89);const y=(0,f.Z)(v,[["render",d],["__scopeId","data-v-184e2a92"]]);var k=y},373:function(e,n,t){t.d(n,{Z:function(){return Z}});var a=t(3396);const i={class:"content"},o=(0,a.Uk)("下载"),r=(0,a.Uk)("删除");function s(e,n,t,s,c,l){const u=(0,a.up)("el-table-column"),d=(0,a.up)("MoreFilled"),g=(0,a.up)("el-icon"),p=(0,a.up)("el-dropdown-item"),m=(0,a.up)("el-dropdown-menu"),w=(0,a.up)("el-dropdown"),h=(0,a.up)("el-table");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(h,{"highlight-current-row":"",data:e.dataList,onRowClick:e.handleClick},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{prop:"songName",label:"歌曲"}),(0,a.Wm)(u,{prop:"singerName",label:"歌手"}),(0,a.Wm)(u,{prop:"introduction",label:"专辑"}),(0,a.Wm)(u,{label:"编辑",width:"80",align:"center"},{default:(0,a.w5)((n=>[(0,a.Wm)(w,null,{dropdown:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{icon:e.Download,onClick:t=>e.downloadMusic({songUrl:n.row.url,songName:n.row.name})},{default:(0,a.w5)((()=>[o])),_:2},1032,["icon","onClick"]),e.show?((0,a.wg)(),(0,a.j4)(p,{key:0,icon:e.Delete,onClick:t=>e.deleteCollection({id:n.row.id})},{default:(0,a.w5)((()=>[r])),_:2},1032,["icon","onClick"])):(0,a.kq)("",!0)])),_:2},1024)])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{onClick:t=>e.handleEdit(n.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(d)])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data","onRowClick"])])}var c=t(4870),l=t(9749),u=t(8045),d=t(9092),g=t(547),p=t(6854);const m=(0,a.aZ)({name:"Download"}),w={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},h=(0,a._)("path",{fill:"currentColor",d:"M160 832h704a32 32 0 110 64H160a32 32 0 110-64zm384-253.696l236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),v=[h];function f(e,n,t,i,o,r){return(0,a.wg)(),(0,a.iD)("svg",w,v)}var y=(0,p.Z)(m,[["render",f]]),k=t(2167),C=t(3658),S=(0,a.aZ)({components:{MoreFilled:d.Z},props:{songList:Array,show:{default:!1}},emits:["changeData"],setup(e){const{getSongTitle:n,getSingerName:t,playMusic:i,checkStatus:o,downloadMusic:r}=(0,u.Z)(),{proxy:s}=(0,a.FN)(),d=(0,l.oR)(),{songList:p}=(0,c.BK)(e),m=(0,c.qj)({dislike:C.JO.Dislike,like:C.JO.Like}),w=(0,a.Fl)((()=>d.getters.songUrl)),h=(0,a.Fl)((()=>d.getters.singerName)),v=(0,a.Fl)((()=>d.getters.songTitle)),f=(0,a.Fl)((()=>{const e=[];return p.value.forEach(((a,i)=>{a["songName"]=n(a.name),a["singerName"]=t(a.name),a["index"]=i,e.push(a)})),e}));function S(e){i({id:e.id,url:e.url,pic:e.pic,index:e.index,name:e.name,lyric:e.lyric,currentSongList:p.value})}function L(e){console.log("row",e)}const N=(0,a.Fl)((()=>d.getters.userId));async function Z({id:e}){if(!o())return;const n=new URLSearchParams;n.append("userId",N.value),n.append("type","0"),n.append("songId",e);const t=await k.x.deleteCollection(n);s.$message({message:t.message,type:t.type}),!1===t.data&&s.$emit("changeData",t.data)}return{dataList:f,iconList:m,Delete:g.Z,Download:y,songUrl:w,singerName:h,songTitle:v,handleClick:S,handleEdit:L,downloadMusic:r,deleteCollection:Z}}}),L=t(89);const N=(0,L.Z)(S,[["render",s],["__scopeId","data-v-45d5c4cc"]]);var Z=N},3089:function(e,n,t){t.d(n,{Z:function(){return u}});var a=t(3396);const i={class:"icon","aria-hidden":"true"},o=["xlink:href"];function r(e,n,t,r,s,c){return(0,a.wg)(),(0,a.iD)("svg",i,[(0,a._)("use",{"xlink:href":e.icon},null,8,o)])}var s=(0,a.aZ)({props:{icon:String}}),c=t(89);const l=(0,c.Z)(s,[["render",r]]);var u=l},9747:function(e,n,t){t.d(n,{Z:function(){return d}});var a=t(3396),i=t(7139);const o={class:"yin-nav"},r=["onClick"];function s(e,n,t,s,c,l){return(0,a.wg)(),(0,a.iD)("ul",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.styleList,((n,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:(0,i.C_)({active:n.name==e.activeName}),onClick:t=>e.handleChangeView(n)},(0,i.zw)(n.name),11,r)))),128))])}var c=(0,a.aZ)({props:{styleList:Array,activeName:String},emits:["click"],setup(){const{proxy:e}=(0,a.FN)();function n(n){e.$emit("click",n)}return{handleChangeView:n}}}),l=t(89);const u=(0,l.Z)(c,[["render",s],["__scopeId","data-v-7ec6ad2f"]]);var d=u},9184:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var a=t(3396);const i={class:"search"};function o(e,n,t,o,r,s){const c=(0,a.up)("yin-nav");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(c,{styleList:e.searchNavList,activeName:e.activeName,onClick:e.handleChangeView},null,8,["styleList","activeName","onClick"]),((0,a.wg)(),(0,a.j4)((0,a.LL)(e.currentView),{class:"search-list"}))])}var r=t(9747);const s={class:"search-song"};function c(e,n,t,i,o,r){const c=(0,a.up)("song-list");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(c,{songList:e.currentSongList},null,8,["songList"])])}var l=t(4870),u=t(9749),d=t(373),g=t(2167),p=(0,a.aZ)({components:{SongList:d.Z},setup(){const{proxy:e}=(0,a.FN)(),n=(0,u.oR)(),t=(0,l.iH)([]),i=(0,a.Fl)((()=>n.getters.searchWord));async function o(n){if(!n)return void(t.value=[]);const a=await g.x.getSongOfSingerName(n);a.data.length?t.value=a.data:(t.value=[],e.$message({message:"暂时没有相关歌曲",type:"warning"}))}return(0,a.YP)(i,(e=>{o(e)})),(0,a.bv)((()=>{o(e.$route.query.keywords)})),{currentSongList:t}}}),m=t(89);const w=(0,m.Z)(p,[["render",c]]);var h=w;const v={class:"search-song-list"};function f(e,n,t,i,o,r){const s=(0,a.up)("play-list");return(0,a.wg)(),(0,a.iD)("div",v,[(0,a.Wm)(s,{playList:e.playList,path:"song-sheet-detail"},null,8,["playList"])])}var y=t(2476),k=(0,a.aZ)({components:{PlayList:y.Z},setup(){const{proxy:e}=(0,a.FN)(),n=(0,u.oR)(),t=(0,l.iH)([]),i=(0,a.Fl)((()=>n.getters.searchWord));async function o(n){if(!n)return;const a=await g.x.getSongListOfLikeTitle(n);a.data.length?t.value=a.data:e.$message({message:"暂无该歌曲内容",type:"warning"})}return(0,a.YP)(i,(e=>{o(e)})),(0,a.bv)((()=>{o(e.$route.query.keywords)})),{playList:t}}});const C=(0,m.Z)(k,[["render",f]]);var S=C,L=(0,a.aZ)({components:{YinNav:r.Z,SearchSong:h,SearchSongList:S},data(){return{searchNavList:[{name:"歌曲",value:"SearchSong"},{name:"歌单",value:"SearchSongList"}],activeName:"歌曲",currentView:"SearchSong"}},methods:{handleChangeView(e){this.activeName=e.name,this.currentView=e.value}}});const N=(0,m.Z)(L,[["render",o],["__scopeId","data-v-d345783c"]]);var Z=N}}]);
//# sourceMappingURL=184.808ba2b1.js.map